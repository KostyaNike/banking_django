{% extends 'layout.html' %}
{% load static %}

{% block title %}–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∫—Ä–µ–¥–∏—Ç—É –¥–ª—è: {{ card.card_number }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'cards/css/add_credit.css' %}">

{% if user.is_authenticated %}
    <a href="{% url 'cards:card' pk=card.pk %}" class="back-button">‚Üê –ù–∞–∑–∞–¥</a>

    <div class="credit-wrapper">
        <div class="credit-container">
            <h2 class="credit-header">–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∫—Ä–µ–¥–∏—Ç—É</h2>

            <form method="post" class="credit-form">
                {% csrf_token %}
                <label for="credit-amount" class="credit-form-label">–°—É–º–∞ –∫—Ä–µ–¥–∏—Ç—É:</label>
                <input type="number" id="credit-amount" name="credit_amount" class="credit-input-field" min="500" max="50000" step="500" required>
            
                <label for="credit-term" class="credit-form-label">–¢–µ—Ä–º—ñ–Ω –∫—Ä–µ–¥–∏—Ç—É (–º—ñ—Å—è—Ü—ñ–≤):</label>
                <select id="credit-term" name="credit_term" class="credit-input-field">
                    <option value="6">6 –º—ñ—Å—è—Ü—ñ–≤ (15%)</option>
                    <option value="12">12 –º—ñ—Å—è—Ü—ñ–≤ (20%)</option>
                    <option value="24">24 –º—ñ—Å—è—Ü—ñ (20%)</option>
                </select>
            
                <button type="submit" name="take_credit" class="credit-submit-button">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∫—Ä–µ–¥–∏—Ç</button>
            </form>
            
            <div class="current-credit">
                <h3 class="credit-header">–í–∞—à –ø–æ—Ç–æ—á–Ω–∏–π –∫—Ä–µ–¥–∏—Ç</h3>
                {% if user.credit_balance > 0 %}
                    <p class="credit-term">–°—É–º–∞: <strong>{{ user.credit_balance }} –≥—Ä–Ω</strong></p>
                    <p class="credit-info">–¢–µ—Ä–º—ñ–Ω –∫—Ä–µ–¥–∏—Ç—É: <strong>{{ credit_term }} –º—ñ—Å—è—Ü—ñ–≤</strong></p>
                    <p class="credit-info">–©–æ–º—ñ—Å—è—á–Ω–∏–π –ø–ª–∞—Ç—ñ–∂: <strong>{{ monthly_payment }} –≥—Ä–Ω</strong></p>
                    <form method="post">
                        {% csrf_token %}
                        <button type="submit" name="repay_credit" class="credit-repay-button">–ü–æ–≥–∞—Å–∏—Ç–∏ –∫—Ä–µ–¥–∏—Ç</button>
                    </form>
                {% else %}
                    <p class="credit-info">–ñ–æ–¥–Ω–∏–π –∫—Ä–µ–¥–∏—Ç –Ω–∞ –≤–∞—à–æ–º—É —Ä–∞—Ö—É–Ω–∫—É.</p>
                {% endif %}
            </div>
        </div>
    </div>
{% else %}
    <div style="display: flex; align-items: center; justify-content: center; height: 100vh; text-align: left;">
        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828843.png" alt="–•—Ä–µ—Å—Ç" style="width: 50px; height: 50px; margin-right: 15px;">
        <h1 style="font-size: 30px; max-width: 500px; line-height: 1.4;">
            –û–π –ª–∏—Ö–æ, —Å—Ö–æ–∂–µ –≤–∞–º —Å–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è... ü´£
        </h1>
    </div>
{% endif %}

{% endblock %}