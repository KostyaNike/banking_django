{% extends 'layout.html' %}
{% load static %}

{% block title %}–ë–∞–Ω–∫–∞ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'cards/css/cards_open.css' %}">

{% if user.is_authenticated %}
    <a href="javascript:history.back()" class="back-button">‚Üê –ù–∞–∑–∞–¥</a>

    <h1 class="form-header">–í—ñ–¥–∫—Ä–∏—Ç—Ç—è –Ω–æ–≤–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É</h1> <!-- –¢–µ–∫—Å—Ç –Ω–∞–¥ —Ñ–æ—Ä–º–æ–π -->

    <!-- –ù–æ–≤—ã–π –±–ª–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π -->
    <div class="info-block">
        <p>–©–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –±–∞–Ω–∫—ñ–≤—Å—å–∫–∏–π —Ä–∞—Ö—É–Ω–æ–∫, –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± –í–∏ –∑–∞–ø–æ–≤–Ω–∏–ª–∏ —Ñ–æ—Ä–º—É –Ω–∏–∂—á–µ. –ù–∞–º —Ç–∞–∫–æ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è –≤ —Ç–æ–º—É, —â–æ –í–∞–º —î 18. –í—Å—è —ñ–Ω–æ—Ä–º–∞—Ü—ñ—è –±—É–¥–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä—É –Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, –ø—ñ—Å–ª—è —á–æ–≥–æ –º–∏ –∑–≤'—è–∂–µ–º–æ—Å—è –∑ –í–∞–º–∏ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω—É.</p>
    </div>

    <form method="POST" enctype="multipart/form-data" class="account-form">
        {% csrf_token %}
        <div class="form-group">
            <label for="first_name">–Ü–º'—è</label>
            <input type="text" id="first_name" name="first_name" required>
        </div>
        <div class="form-group">
            <label for="last_name">–ü—Ä–∏–∑–≤–∏—â–µ</label>
            <input type="text" id="last_name" name="last_name" required>
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
            <label for="phone_number">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É</label>
            <input type="text" id="phone_number" name="phone_number" required>
        </div>
        <div class="form-group">
            <label for="account_type">–¢–∏–ø —Ä–∞—Ö—É–Ω–∫—É</label>
            <select id="account_type" name="account_type" required>
                <option value="personal">–û—Å–æ–±–∏—Å—Ç–∏–π</option>
                <option value="business">–î–ª—è –±—ñ–∑–Ω–µ—Å—É</option>
            </select>
        </div>
        <div class="form-group">
            <label for="birth_date">–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</label>
            <input type="date" id="birth_date" name="birth_date" required>
        </div>
        <div class="form-group">
            <label for="workplace">–ú—ñ—Å—Ü–µ —Ä–æ–±–æ—Ç–∏</label>
            <input type="text" id="workplace" name="workplace" required>
        </div>
        <div class="form-group">
            <label for="position">–ü–æ—Å–∞–¥–∞</label>
            <input type="text" id="position" name="position" required>
        </div>
        <div class="form-group">
            <label for="monthly_income">–°–µ—Ä–µ–¥–Ω—ñ–π –º—ñ—Å—è—á–Ω–∏–π –¥–æ—Ö—ñ–¥</label>
            <input type="number" id="monthly_income" name="monthly_income" required>
        </div>
        <div class="form-group">
            <label for="document">–ü—Ä–∏–∫—Ä—ñ–ø–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç</label>
            <div class="file-upload-wrapper">
                <input type="file" id="document" name="document" accept=".pdf,.doc,.docx,.jpg,.png" required onchange="updateFileName()">
                <span id="file-name">–ù–µ–º–∞—î –≤–∏–±—Ä–∞–Ω–æ–≥–æ —Ñ–∞–π–ª—É</span>
            </div>
            <p style="color: #4a4a4a;"><b>–ü—Ä–∏–∫—Ä—ñ–ø—ñ—Ç—å –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –¥–æ–∑–≤—ñ–ª –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –±—ñ–ª—å—à–µ –Ω—ñ–∂ 1 —Ä–∞—Ö—É–Ω–∫—É.</b></p>
        </div>
        <div class="form-group">
            <label for="comment">–ö–æ–º–µ–Ω—Ç–∞—Ä</label>
            <textarea id="comment" name="comment" rows="4" required></textarea>
        </div>
        <button type="submit" class="submit-btn">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏</button>
    </form>

{% else %}
    <div style="display: flex; align-items: center; justify-content: center; height: 100vh; text-align: left;">
        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828843.png" alt="–•—Ä–µ—Å—Ç" style="width: 50px; height: 50px; margin-right: 15px;">
        <h1 style="font-size: 30px; max-width: 500px; line-height: 1.4;">
            –û–π –ª–∏—Ö–æ, —Å—Ö–æ–∂–µ –≤–∞–º —Å–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è... ü´£
        </h1>
    </div>
{% endif %}

{% endblock %}

<script>
    function updateFileName() {
        const fileInput = document.getElementById('document');
        const fileName = fileInput.files.length > 0 ? fileInput.files[0].name : '–ù–µ–º–∞—î –≤–∏–±—Ä–∞–Ω–æ–≥–æ —Ñ–∞–π–ª—É';
        document.getElementById('file-name').textContent = fileName;
    }
</script>