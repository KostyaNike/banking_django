{% extends 'layout.html' %}

{% block title %} –ü–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–ª—è –∫–∞—Ä—Ç–∫–∏ {{ card.card_number }}{% endblock %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'cards/css/mobile.css' %}">

{% if user.is_authenticated %}
    <a href="{% url 'cards:card' pk=card.pk %}" class="back-button">‚Üê –ù–∞–∑–∞–¥</a>

    <div class="content-wrapper">
        <div class="mobile-recharge-container">
            <h1 class="mobile-page-header">–ü–æ–ø–æ–≤–Ω–∏—Ç–∏ –º–æ–±—ñ–ª—å–Ω–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω</h1>

            <form method="POST" class="mobile-recharge-form">
                {% csrf_token %}
                
                <label for="phone_number" class="mobile-form-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (–º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç):</label>
                <input type="text" id="phone_number" name="phone_number" required placeholder="+380123456789" class="mobile-input-field">
                
                <label for="amount" class="mobile-form-label">–°—É–º–∞ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è (–≥—Ä–Ω):</label>
                <input type="number" id="amount" name="amount" required min="1" class="mobile-input-field" oninput="validateAmount()">
                
                <button type="submit" class="mobile-submit-button">–ü–æ–ø–æ–≤–Ω–∏—Ç–∏</button>
            </form>

            {% if messages %}
                <div class="mobile-messages-container">
                    {% for message in messages %}
                        <div class="mobile-message {{ message.tags }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—É–º–º—ã –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
        function validateAmount() {
            const amountField = document.getElementById('amount');
            if (parseInt(amountField.value) < 1) {
                amountField.setCustomValidity('–°—É–º–∞ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –±—ñ–ª—å—à–µ 1 –≥—Ä–Ω.');
            } else {
                amountField.setCustomValidity('');
            }
        }
    </script>
{% else %}
    <div style="display: flex; align-items: center; justify-content: center; height: 100vh; text-align: left;">
        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828843.png" alt="–•—Ä–µ—Å—Ç" style="width: 50px; height: 50px; margin-right: 15px;">
        <h1 style="font-size: 30px; max-width: 500px; line-height: 1.4;">
            –û–π –ª–∏—Ö–æ, —Å—Ö–æ–∂–µ –≤–∞–º —Å–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è... ü´£
        </h1>
    </div>
{% endif %}

{% endblock %}