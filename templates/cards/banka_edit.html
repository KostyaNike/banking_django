{% extends 'layout.html' %}
{% load static %}

{% block title %}–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –Ω–∞–∫–æ–ø–∏—á—É–≤–∞–ª—å–Ω–æ—ó –±–∞–Ω–∫–∏{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'cards/css/banka_open.css' %}">

{% if user.is_authenticated %}
    <a href="javascript:history.back()" class="back-button">‚Üê –ù–∞–∑–∞–¥</a>

    <div class="container">
        <h1>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –±–∞–Ω–∫—É</h1>

        {% if banka %}
            <form method="post" id="editBankaForm">
                {% csrf_token %}
                <p><strong>–ù–∞–∑–≤–∞ –±–∞–Ω–∫–∏:</strong></p>
                {{ form.name }}
                <p><strong>–û–ø–∏—Å:</strong></p>
                {{ form.description }}
                <p><strong>–¶—ñ–ª—å –Ω–∞–∫–æ–ø–∏—á—É–≤–∞–Ω–Ω—è (–≥—Ä–Ω):</strong></p>
                {{ form.goal }}
                {% if error_message %}
                    <p class="error">{{ error_message }}</p>  <!-- –í—ã–≤–æ–¥–∏–º –æ—à–∏–±–∫—É -->
                {% endif %}
                <button type="submit">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
            </form>
        {% else %}
            <p class="no-banka-message">–£ –≤–∞—Å –Ω–µ–º–∞—î –Ω–∞–∫–æ–ø–∏—á—É–≤–∞–ª—å–Ω–æ—ó –±–∞–Ω–∫–∏. –í–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ <a href="{% url 'cards:open_banka' %}">–≤—ñ–¥–∫—Ä–∏—Ç–∏ –±–∞–Ω–∫—É</a>.</p>
        {% endif %}
    </div>

{% else %}
    <div class="auth-message">
        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828843.png" alt="–•—Ä–µ—Å—Ç" class="error-icon">
        <h1>–û–π –ª–∏—Ö–æ, —Å—Ö–æ–∂–µ –≤–∞–º —Å–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è... ü´£</h1>
    </div>
{% endif %}

<script>
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
    document.getElementById('editBankaForm').addEventListener('submit', function(event) {
        var goalValue = parseFloat(document.querySelector('[name="goal"]').value);
        
        // –ï—Å–ª–∏ —Ü–µ–ª—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –±–æ–ª—å—à–µ 100000, –æ—Ç–º–µ–Ω—è–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
        if (goalValue > 100000) {
            event.preventDefault();
            alert('–¶—ñ–ª—å –Ω–∞–∫–æ–ø–∏—á—É–≤–∞–Ω–Ω—è –Ω–µ –º–æ–∂–µ –ø–µ—Ä–µ–≤–∏—â—É–≤–∞—Ç–∏ 100000 –≥—Ä–Ω.');
        }
    });
</script>

{% endblock %}